-- Proton Exploit
-- Keyless, Rayfield UI, MAXIMUM BYPASS + FULL CONFIG SYSTEM
-- by fluxu

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Proton",
   LoadingTitle = "Proton Loading...",
   LoadingSubtitle = "by fluxu",
   ConfigurationSaving = {
      Enabled = false
   },
   Discord = {
      Enabled = false
   },
   KeySystem = false
})

-- === SERVICES ===
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local CoreGui = game:GetService("CoreGui")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local LocalPlayer = Players.LocalPlayer

-- === STATE VARIABLES (OFF BY DEFAULT) ===
local AntiKickEnabled = false
local AntiKillEnabled = false
local AntiDisconnectEnabled = false
local DisableStrictACEnabled = false
local AntiGameTPEnabled = false
local AntiFlingEnabled = false
local ESPEnabled = false
local AntiFreezeEnabled = false
local SpeedEnabled = false
local JumpPowerEnabled = false
local AntiPlayerTPEnabled = false
local AutoLoadScriptEnabled = false
local NoClipToolsEnabled = false
local InfiniteYieldEnabled = false
local AntiVoidEnabled = false

-- === ESP STORAGE ===
local ESPBoxes = {}
local ESPNames = {}
local ESPTracers = {}

-- === ICON ===
local TabIcon = 4483362458

-- === TABS ===
local AntiTab = Window:CreateTab("Anti", TabIcon)
local VisualsTab = Window:CreateTab("ESP", TabIcon)
local MovementTab = Window:CreateTab("Movement", TabIcon)
local ServerTab = Window:CreateTab("Server", TabIcon)
local ConfigTab = Window:CreateTab("Config", TabIcon)
local ExtraTab = Window:CreateTab("Extra", TabIcon)

-- === ANTI SECTION ===
AntiTab:CreateToggle({
   Name = "Anti Kick",
   CurrentValue = false,
   Flag = "AntiKick",
   Callback = function(v) AntiKickEnabled = v end,
})

AntiTab:CreateToggle({
   Name = "Anti Kill (Godmode)",
   CurrentValue = false,
   Flag = "AntiKill",
   Callback = function(v) AntiKillEnabled = v end,
})

AntiTab:CreateToggle({
   Name = "Anti Disconnect",
   CurrentValue = false,
   Flag = "AntiDisconnect",
   Callback = function(v) AntiDisconnectEnabled = v end,
})

AntiTab:CreateToggle({
   Name = "Disable ALL AntiCheat",
   Info = "Nukes every script, remote, log",
   CurrentValue = false,
   Flag = "DisableStrictAC",
   Callback = function(v)
      DisableStrictACEnabled = v
      if v then RunMaxACDisabler() end
   end,
})

AntiTab:CreateToggle({
   Name = "Anti Game Teleport",
   CurrentValue = false,
   Flag = "AntiGameTP",
   Callback = function(v) AntiGameTPEnabled = v end,
})

AntiTab:CreateToggle({
   Name = "Anti Fling (True Noclip)",
   CurrentValue = false,
   Flag = "AntiFling",
   Callback = function(v) AntiFlingEnabled = v end,
})

AntiTab:CreateToggle({
   Name = "Anti Freeze",
   CurrentValue = false,
   Flag = "AntiFreeze",
   Callback = function(v) AntiFreezeEnabled = v end,
})

AntiTab:CreateToggle({
   Name = "Block Player Teleport",
   CurrentValue = false,
   Flag = "AntiPlayerTP",
   Callback = function(v) AntiPlayerTPEnabled = v end,
})

-- === VISUALS TAB ===
VisualsTab:CreateToggle({
   Name = "ESP Boxes",
   CurrentValue = false,
   Flag = "ESPBoxes",
   Callback = function(v)
      ESPEnabled = v
      for _, box in pairs(ESPBoxes) do box.Visible = v end
   end,
})

VisualsTab:CreateToggle({
   Name = "ESP Names",
   CurrentValue = false,
   Flag = "ESPNames",
   Callback = function(v)
      for _, name in pairs(ESPNames) do name.Visible = v end
   end,
})

VisualsTab:CreateToggle({
   Name = "ESP Tracers",
   CurrentValue = false,
   Flag = "ESPTracers",
   Callback = function(v)
      for _, tracer in pairs(ESPTracers) do tracer.Visible = v end
   end,
})

-- === MOVEMENT TAB ===
MovementTab:CreateToggle({
   Name = "Speed (45)",
   CurrentValue = false,
   Flag = "Speed",
   Callback = function(v)
      SpeedEnabled = v
      if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
         LocalPlayer.Character.Humanoid.WalkSpeed = v and 45 or 16
      end
   end,
})

MovementTab:CreateToggle({
   Name = "Jump Power (80)",
   CurrentValue = false,
   Flag = "JumpPower",
   Callback = function(v)
      JumpPowerEnabled = v
      if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
         LocalPlayer.Character.Humanoid.JumpPower = v and 80 or 50
      end
   end,
})

-- === SERVER TAB (BUTTONS ONLY) ===
ServerTab:CreateButton({
   Name = "Create Private Server",
   Callback = function() CreatePrivateServer() end,
})

ServerTab:CreateButton({
   Name = "Server Hop",
   Callback = function() HopServer() end,
})

ServerTab:CreateButton({
   Name = "Rejoin",
   Callback = function()
      TeleportService:Teleport(game.PlaceId, LocalPlayer)
   end,
})

-- === EXTRA TAB ===
ExtraTab:CreateToggle({
   Name = "Noclip Tools",
   Info = "Pass through tools on ground",
   CurrentValue = false,
   Flag = "NoClipTools",
   Callback = function(v) NoClipToolsEnabled = v end,
})

ExtraTab:CreateToggle({
   Name = "Infinite Yield",
   Info = "Load IY commands",
   CurrentValue = false,
   Flag = "InfiniteYield",
   Callback = function(v)
      InfiniteYieldEnabled = v
      if v then loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))() end
   end,
})

ExtraTab:CreateToggle({
   Name = "Anti Void",
   Info = "Prevents falling into void",
   CurrentValue = false,
   Flag = "AntiVoid",
   Callback = function(v) AntiVoidEnabled = v end,
})

ExtraTab:CreateToggle({
   Name = "Auto Load Script",
   CurrentValue = false,
   Flag = "AutoLoadScript",
   Callback = function(v) AutoLoadScriptEnabled = v end,
})

-- === CONFIG TAB ===
local ConfigDropdown = ConfigTab:CreateDropdown({
   Name = "Select Config",
   Options = {},
   CurrentOption = "",
   Callback = function() end,
})

local ConfigNameInput = ConfigTab:CreateInput({
   Name = "New Config Name",
   PlaceholderText = "myconfig",
   RemoveTextAfterFocusLost = false,
   Callback = function() end,
})

ConfigTab:CreateButton({
   Name = "Save Config",
   Callback = function()
      local name = ConfigNameInput.Value
      if name == "" then return end
      local config = {
         AntiKick = AntiKickEnabled,
         AntiKill = AntiKillEnabled,
         AntiDisconnect = AntiDisconnectEnabled,
         DisableStrictAC = DisableStrictACEnabled,
         AntiGameTP = AntiGameTPEnabled,
         AntiFling = AntiFlingEnabled,
         ESPBoxes = Rayfield.Flags["ESPBoxes"].CurrentValue,
         ESPNames = Rayfield.Flags["ESPNames"].CurrentValue,
         ESPTracers = Rayfield.Flags["ESPTracers"].CurrentValue,
         AntiFreeze = AntiFreezeEnabled,
         Speed = SpeedEnabled,
         JumpPower = JumpPowerEnabled,
         AntiPlayerTP = AntiPlayerTPEnabled,
         NoClipTools = NoClipToolsEnabled,
         InfiniteYield = InfiniteYieldEnabled,
         AntiVoid = AntiVoidEnabled,
         AutoLoadScript = AutoLoadScriptEnabled
      }
      writefile("ProtonConfigs/"..name..".json", HttpService:JSONEncode(config))
      RefreshConfigList()
      Rayfield:Notify({Title="Saved", Content="'"..name.."'", Duration=2})
   end,
})

ConfigTab:CreateButton({
   Name = "Load Config",
   Callback = function()
      local name = ConfigDropdown.CurrentOption
      if name == "" or not isfile("ProtonConfigs/"..name..".json") then return end
      local data = HttpService:JSONDecode(readfile("ProtonConfigs/"..name..".json"))
      Rayfield.Flags["AntiKick"]:Set(data.AntiKick or false)
      Rayfield.Flags["AntiKill"]:Set(data.AntiKill or false)
      Rayfield.Flags["AntiDisconnect"]:Set(data.AntiDisconnect or false)
      Rayfield.Flags["DisableStrictAC"]:Set(data.DisableStrictAC or false)
      Rayfield.Flags["AntiGameTP"]:Set(data.AntiGameTP or false)
      Rayfield.Flags["AntiFling"]:Set(data.AntiFling or false)
      Rayfield.Flags["AntiFreeze"]:Set(data.AntiFreeze or false)
      Rayfield.Flags["AntiPlayerTP"]:Set(data.AntiPlayerTP or false)
      Rayfield.Flags["Speed"]:Set(data.Speed or false)
      Rayfield.Flags["JumpPower"]:Set(data.JumpPower or false)
      Rayfield.Flags["ESPBoxes"]:Set(data.ESPBoxes or false)
      Rayfield.Flags["ESPNames"]:Set(data.ESPNames or false)
      Rayfield.Flags["ESPTracers"]:Set(data.ESPTracers or false)
      Rayfield.Flags["NoClipTools"]:Set(data.NoClipTools or false)
      Rayfield.Flags["InfiniteYield"]:Set(data.InfiniteYield or false)
      Rayfield.Flags["AntiVoid"]:Set(data.AntiVoid or false)
      Rayfield.Flags["AutoLoadScript"]:Set(data.AutoLoadScript or false)
      -- Update vars
      AntiKickEnabled = data.AntiKick or false
      AntiKillEnabled = data.AntiKill or false
      AntiDisconnectEnabled = data.AntiDisconnect or false
      DisableStrictACEnabled = data.DisableStrictAC or false
      AntiGameTPEnabled = data.AntiGameTP or false
      AntiFlingEnabled = data.AntiFling or false
      ESPEnabled = data.ESPBoxes or false
      AntiFreezeEnabled = data.AntiFreeze or false
      SpeedEnabled = data.Speed or false
      JumpPowerEnabled = data.JumpPower or false
      AntiPlayerTPEnabled = data.AntiPlayerTP or false
      NoClipToolsEnabled = data.NoClipTools or false
      InfiniteYieldEnabled = data.InfiniteYield or false
      AntiVoidEnabled = data.AntiVoid or false
      AutoLoadScriptEnabled = data.AutoLoadScript or false
      Rayfield:Notify({Title="Loaded", Content="'"..name.."'", Duration=2})
   end,
})

ConfigTab:CreateButton({
   Name = "Delete Config",
   Callback = function()
      local name = ConfigDropdown.CurrentOption
      if name == "" or not isfile("ProtonConfigs/"..name..".json") then return end
      delfile("ProtonConfigs/"..name..".json")
      RefreshConfigList()
      Rayfield:Notify({Title="Deleted", Content="'"..name.."'", Duration=2})
   end,
})

-- === CONFIG LIST REFRESH ===
function RefreshConfigList()
   local files = listfiles("ProtonConfigs")
   local names = {}
   for _, file in ipairs(files) do
      local name = file:match("ProtonConfigs\\(.+).json")
      if name then table.insert(names, name) end
   end
   ConfigDropdown:Set(names)
end

-- === MAX POWER BYPASS ===
local blocked = {
   "anticheat","ac","anti","exploit","cheat","security","protector","adonis","krystal","eclipse",
   "fates","hdadmin","admin","kohls","detect","check","validator","integrity","synapse","fluxus",
   "brainrot","rot","bypass","fe","script","localscript","module","remote","event","function",
   "kick","ban","report","log","debug","assert","error","warn","print","require","getfenv","getrenv",
   "http","spy","hook","metatable","namecall","index","newindex","fire","invoke","fireclickdetector"
}

local function isSuspicious(obj)
   if not obj or not obj.Name then return false end
   local n = obj.Name:lower()
   for _, k in blocked do if n:find(k) then return true end end
   return false
end

local function RunMaxACDisabler()
   if not DisableStrictACEnabled then return end

   -- Destroy ALL
   for _, obj in ipairs(game:GetDescendants()) do
      if obj:IsA("Script") or obj:IsA("LocalScript") or obj:IsA("ModuleScript") or obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") or obj:IsA("BindableEvent") then
         if isSuspicious(obj) then pcall(obj.Destroy, obj) end
      end
   end

   -- Hook EVERYTHING
   local oldReq = require
   require = newcclosure(function(mod)
      if isSuspicious(mod) then return function() end end
      return oldReq(mod)
   end)

   local mt = getrawmetatable(game)
   local oldNamecall = mt.__namecall
   setreadonly(mt, false)
   mt.__namecall = newcclosure(function(self, ...)
      local method = getnamecallmethod()
      if isSuspicious(self) or method:lower():find("kick") or method:lower():find("ban") then return end
      return oldNamecall(self, ...)
   end)
   setreadonly(mt, true)

   -- Kill logs
   pcall(function() game:GetService("ScriptContext").Error:Connect(function() end) end)
   pcall(function() game:GetService("LogService").MessageOut:Connect(function() end) end)

   -- Monitor
   game.DescendantAdded:Connect(function(obj)
      if DisableStrictACEnabled and (obj:IsA("Script") or obj:IsA("LocalScript") or obj:IsA("RemoteEvent")) then
         if isSuspicious(obj) then task.defer(function() pcall(obj.Destroy, obj) end) end
      end
   end)
end

if DisableStrictACEnabled then RunMaxACDisabler() end

-- === GODMODE + SPEED + JUMP ===
LocalPlayer.CharacterAdded:Connect(function(char)
   if AntiKillEnabled then ApplyGodMode(char) end
   task.wait()
   if SpeedEnabled and char:FindFirstChild("Humanoid") then char.Humanoid.WalkSpeed = 45 end
   if JumpPowerEnabled and char:FindFirstChild("Humanoid") then char.Humanoid.JumpPower = 80 end
end)

-- === NOCLIP + TOOLS + VOID ===
RunService.Stepped:Connect(function()
   if not LocalPlayer.Character then return end
   local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
   if not root then return end

   -- Anti Freeze
   if AntiFreezeEnabled and root.Anchored then root.Anchored = false end

   -- Anti Void
   if AntiVoidEnabled and root.Position.Y < -100 then
      root.CFrame = root.CFrame + Vector3.new(0, 150, 0)
   end

   -- True Noclip
   if AntiFlingEnabled then
      for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
         if part:IsA("BasePart") then part.CanCollide = false end
      end
      for _, plr in Players:GetPlayers() do
         if plr ~= LocalPlayer and plr.Character then
            for _, obj in plr.Character:GetDescendants() do
               if obj:IsA("BasePart") and (obj.Parent:FindFirstChild("Humanoid") or obj:IsA("Tool")) then
                  obj.CanCollide = false
               end
            end
         end
      end
   end

   -- Noclip Tools on Ground
   if NoClipToolsEnabled then
      for _, tool in Workspace:GetDescendants() do
         if tool:IsA("Tool") and not tool.Parent:FindFirstChild("Humanoid") then
            for _, part in tool:GetDescendants() do
               if part:IsA("BasePart") then part.CanCollide = false end
            end
         end
      end
   end
end)

-- === ESP, SERVER, AUTO LOAD (same as before) ===
-- [ESP, Server Hop, Private Server, Auto Load unchanged]

-- === FOLDER + REFRESH ===
makefolder("ProtonConfigs")
RefreshConfigList()
