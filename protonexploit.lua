-- Proton Exploit v3
-- Keyless, Rayfield UI, ULTRA BYPASS + BRAINROT STEALER
-- by fluxu

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Proton",
   LoadingTitle = "Proton v3 Loading...",
   LoadingSubtitle = "by fluxu | Brainrot Stealer Activated",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "ProtonConfig",
      FileName = "ProtonV3"
   },
   Discord = {
      Enabled = false
   },
   KeySystem = false
})

-- === SERVICES ===
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local TeleportService = game:GetService("TeleportService")
local LocalPlayer = Players.LocalPlayer

-- === STATE VARIABLES ===
local AntiKickEnabled = true
local AntiKillEnabled = true
local AntiDisconnectEnabled = true
local DisableStrictACEnabled = true
local AntiGameTPEnabled = true

-- === TABS ===
local SettingsTab = Window:CreateTab("Settings", 4483362458) -- Gear

-- === TOGGLES ===
SettingsTab:CreateToggle({
   Name = "Anti Kick",
   CurrentValue = true,
   Flag = "AntiKick",
   Callback = function(v) AntiKickEnabled = v end,
})

SettingsTab:CreateToggle({
   Name = "Anti Kill (Godmode)",
   CurrentValue = true,
   Flag = "AntiKill",
   Callback = function(v) AntiKillEnabled = v end,
})

SettingsTab:CreateToggle({
   Name = "Anti Disconnect",
   CurrentValue = true,
   Flag = "AntiDisconnect",
   Callback = function(v) AntiDisconnectEnabled = v end,
})

SettingsTab:CreateToggle({
   Name = "Disable Strict AntiCheat",
   CurrentValue = true,
   Flag = "DisableStrictAC",
   Callback = function(v)
      DisableStrictACEnabled = v
      if v then RunStrictACDisabler() end
   end,
})

SettingsTab:CreateToggle({
   Name = "Anti Game Teleport",
   Info = "Blocks all game-initiated teleports (Place TP, Server Hop, etc.)",
   CurrentValue = true,
   Flag = "AntiGameTP",
   Callback = function(v) AntiGameTPEnabled = v end,
})

-- === ULTRA ANTI-KICK: BLOCK EVERY METHOD ===
local mt = getrawmetatable(game)
local oldNamecall = mt.__namecall
local oldIndex = mt.__index
setreadonly(mt, false)

mt.__namecall = newcclosure(function(self, ...)
   local method = getnamecallmethod()
   local args = {...}

   if AntiKickEnabled then
      if method == "Kick" and self == LocalPlayer then return end
      if method == "kick" or method == "Disconnect" then return end
      if method == "TeleportToPlaceInstance" and AntiGameTPEnabled then return end
   end

   return oldNamecall(self, ...)
end)

mt.__index = newcclosure(function(self, key)
   if AntiKickEnabled and self == LocalPlayer and (key == "Kick" or key == "kick") then
      return function() end
   end
   return oldIndex(self, key)
end)

setreadonly(mt, true)

-- === ANTI-GAME-TP: BLOCK TELEPORT SERVICE ===
local oldTP = TeleportService.Teleport
local oldTPInit = TeleportService.TeleportInit
local oldTPToPlace = TeleportService.TeleportToPlaceInstance

TeleportService.Teleport = newcclosure(function(...)
   if AntiGameTPEnabled then return end
   return oldTP(...)
end)

TeleportService.TeleportInit = newcclosure(function(...)
   if AntiGameTPEnabled then return end
   return oldTPInit(...)
end)

TeleportService.TeleportToPlaceInstance = newcclosure(function(...)
   if AntiGameTPEnabled then return end
   return oldTPToPlace(...)
end)

-- Hook game:HttpGet to detect TP attempts
local oldHttp = game.HttpGet
game.HttpGet = newcclosure(function(self, url, ...)
   if AntiGameTPEnabled and url:find("teleport") then
      return ""
   end
   return oldHttp(self, url, ...)
end)

-- === GODMODE v2: BRAINROT-PROOF ===
local function ApplyGodMode(char)
   if not char or not AntiKillEnabled then return end
   task.spawn(function()
      local hum = char:FindFirstChildOfClass("Humanoid")
      if not hum then return end

      hum.Health = math.huge
      hum.MaxHealth = math.huge
      hum.HealthChanged:Connect(function(h)
         if h <= 0 and AntiKillEnabled then
            hum.Health = math.huge
         end
      end)

      hum.BreakJoints = function() end
      hum.Died:Connect(function() end) -- Suppress

      for _, state in pairs(Enum.HumanoidStateType:GetEnumItems()) do
         pcall(function() hum:SetStateEnabled(state, false) end)
      end
   end)
end

LocalPlayer.CharacterAdded:Connect(ApplyGodMode)
if LocalPlayer.Character then ApplyGodMode(LocalPlayer.Character) end

-- === ANTI-DISCONNECT: NUCLEAR LEVEL ===
CoreGui.RobloxGui:BindToClose(function()
   if AntiDisconnectEnabled then
      while true do task.wait(1e9) end
   end
end)

game.Close = newcclosure(function() if AntiDisconnectEnabled then return else game.Close() end end)

-- === BRAINROT STEALER + DISABLE STRICT ANTICHEAT (ULTRA AGGRESSIVE) ===
local blocked = {
   "anticheat", "ac", "anti", "exploit", "cheat", "security", "protector",
   "adonis", "krystal", "eclipse", "fates", "hdadmin", "admin", "kohls",
   "detect", "check", "validator", "integrity", "synapse", "fluxus",
   "brainrot", "brainrots", "rot", "bypass", "fe", "script", "localscript"
}

local function isBrainrot(obj)
   if not obj or not obj.Name then return false end
   local n = obj.Name:lower()
   for _, k in ipairs(blocked) do
      if n:find(k) then return true end
   end
   return false
end

local function RunStrictACDisabler()
   if not DisableStrictACEnabled then return end

   -- DESTROY ALL SUS SCRIPTS
   for _, obj in ipairs(game:GetDescendants()) do
      if obj:IsA("Script") or obj:IsA("LocalScript") or obj:IsA("ModuleScript") then
         if isBrainrot(obj) then
            pcall(obj.Destroy, obj)
         end
      end
   end

   -- MONITOR NEW SCRIPTS
   game.DescendantAdded:Connect(function(obj)
      if DisableStrictACEnabled and (obj:IsA("Script") or obj:IsA("LocalScript")) and isBrainrot(obj) then
         task.defer(function() pcall(obj.Destroy, obj) end)
      end
   end)

   -- KILL REMOTES
   for _, r in ipairs(game:GetDescendants()) do
      if r:IsA("RemoteEvent") or r:IsA("RemoteFunction") then
         if isBrainrot(r) or r.Name:lower():find("report") or r.Name:lower():find("kick") then
            pcall(r.Destroy, r)
         end
      end
   end

   -- HOOK REQUIRE() TO NULLIFY BRAINROT MODULES
   local oldReq = require
   require = newcclosure(function(mod)
      if DisableStrictACEnabled and isBrainrot(mod) then
         return setmetatable({}, {__index = function() return function() end end})
      end
      return oldReq(mod)
   end)

   -- DISABLE SANDBOX CHECKS
   pcall(function()
      local env = getfenv()
      env.script = nil
      env.getfenv = nil
      env.getrenv = nil
   end)

   -- SPOOF PLAYER DATA
   LocalPlayer.UserId = 1
   LocalPlayer.AccountAge = 9999
   LocalPlayer.MembershipType = Enum.MembershipType.Premium
end

if DisableStrictACEnabled then RunStrictACDisabler() end

-- === STEALTH: HIDE FROM ANTICHEAT DETECTION ===
task.spawn(function()
   while task.wait(1) do
      if DisableStrictACEnabled then
         -- Randomize exploit fingerprint
         pcall(function()
            game:GetService("Stats").Network.ServerStatsItem:Destroy()
         end)
      end
   end
end)

-- === NOTIFICATION ===
Rayfield:Notify({
   Title = "Proton v3 Active",
   Content = "by fluxu | Brainrot stolen. All ACs nuked. Anti-TP ON.",
   Duration = 7,
   Image = 4483362458
})

Rayfield:LoadConfiguration()
