-- Proton Exploit v3
-- Keyless, Rayfield UI, Ultimate Anti-Cheat Bypass
-- by fluxu

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Proton",
   LoadingTitle = "Proton Loading...",
   LoadingSubtitle = "by fluxu",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "ProtonConfig",
      FileName = "ProtonSettings"
   },
   Discord = { Enabled = false },
   KeySystem = false
})

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- State
local AntiKickEnabled = true
local AntiKillEnabled = true
local AntiDisconnectEnabled = true
local DisableStrictACEnabled = true
local AntiGameTPEnabled = true
local AntiFlingEnabled = true
local AntiHitEnabled = true
local DodgeDistance = 15

-- === TABS ===
local SettingsTab = Window:CreateTab("Settings", 4483362458)
local PlayerTab = Window:CreateTab("Player", 4483367573)

-- === SETTINGS TOGGLES ===
SettingsTab:CreateToggle({
   Name = "Anti Kick",
   CurrentValue = true,
   Flag = "AntiKick",
   Callback = function(v) AntiKickEnabled = v end,
})

SettingsTab:CreateToggle({
   Name = "Anti Kill",
   CurrentValue = true,
   Flag = "AntiKill",
   Callback = function(v) AntiKillEnabled = v end,
})

SettingsTab:CreateToggle({
   Name = "Anti Disconnect",
   CurrentValue = true,
   Flag = "AntiDisconnect",
   Callback = function(v) AntiDisconnectEnabled = v end,
})

SettingsTab:CreateToggle({
   Name = "Disable Strict AntiCheat",
   CurrentValue = true,
   Flag = "DisableStrictAC",
   Callback = function(v)
      DisableStrictACEnabled = v
      if v then RunStrictACDisabler() end
   end,
})

SettingsTab:CreateToggle({
   Name = "Anti Game Teleport",
   CurrentValue = true,
   Flag = "AntiGameTP",
   Callback = function(v) AntiGameTPEnabled = v end,
})

-- === PLAYER TAB ===
PlayerTab:CreateToggle({
   Name = "AntiFling (Noclip Players)",
   CurrentValue = true,
   Flag = "AntiFling",
   Callback = function(v) AntiFlingEnabled = v end,
})

PlayerTab:CreateToggle({
   Name = "AntiHit (Auto Dodge)",
   CurrentValue = true,
   Flag = "AntiHit",
   Callback = function(v) AntiHitEnabled = v end,
})

PlayerTab:CreateSlider({
   Name = "Dodge Distance",
   Range = {5, 50},
   Increment = 1,
   CurrentValue = 15,
   Flag = "DodgeDistance",
   Callback = function(v) DodgeDistance = v end,
})

-- === ULTIMATE ANTI-KICK (BYPASS ALL KICK METHODS) ===
local mt = getrawmetatable(game)
local oldNamecall = mt.__namecall
local oldIndex = mt.__index
setreadonly(mt, false)

mt.__namecall = newcclosure(function(self, ...)
   local method = getnamecallmethod()
   if AntiKickEnabled and (method == "Kick" or method == "kick") and self == LocalPlayer then
      return
   end
   if method == "Disconnect" then return end
   return oldNamecall(self, ...)
end)

mt.__index = newcclosure(function(self, key)
   if AntiKickEnabled and self == LocalPlayer and (key == "Kick" or key == "kick") then
      return function() end
   end
   return oldIndex(self, key)
end)

setreadonly(mt, true)

-- === GOD MODE (ANTI-KILL) ===
local function ApplyGodMode(char)
   if not char or not AntiKillEnabled then return end
   local hum = char:FindFirstChildOfClass("Humanoid")
   if not hum then return end

   hum.Health = math.huge
   hum.MaxHealth = math.huge
   hum.BreakJoints = function() end
   hum:SetStateEnabled(Enum.HumanoidStateType.Dead, false)

   hum.HealthChanged:Connect(function(h)
      if h <= 0 and AntiKillEnabled then
         hum.Health = hum.MaxHealth
      end
   end)
end

LocalPlayer.CharacterAdded:Connect(ApplyGodMode)
if LocalPlayer.Character then ApplyGodMode(LocalPlayer.Character) end

-- === ANTI DISCONNECT ===
CoreGui.RobloxGui:BindToClose(function()
   if AntiDisconnectEnabled then task.wait(9e9) end
end)

local oldClose = game.Close
game.Close = newcclosure(function(...)
   if AntiDisconnectEnabled then return end
   return oldClose(...)
end)

-- === ANTI GAME TELEPORT (BLOCKS ALL FORCED TELEPORTS) ===
local oldHumanoidRootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
local LastCFrame = oldHumanoidRootPart and oldHumanoidRootPart.CFrame

RunService.Heartbeat:Connect(function()
   if not AntiGameTPEnabled then return end
   local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
   if not hrp then return end

   local current = hrp.CFrame
   if LastCFrame and (current.Position - LastCFrame.Position).Magnitude > 50 then
      hrp.CFrame = LastCFrame
   end
   LastCFrame = current
end)

-- === ULTIMATE ANTICHEAT BYPASS (STEAL BRAINROT-LEVEL) ===
local function RunStrictACDisabler()
   if not DisableStrictACEnabled then return end

   local blocked = {
      "anticheat","ac","anti","exploit","cheat","security","protector",
      "adonis","krystal","eclipse","fates","hdadmin","admin","kohls",
      "detect","check","validator","integrity","synapse","fluxus",
      "brainrot","fe","kill","ban","kick","report","remote","check"
   }

   local function isBad(obj)
      if not obj.Name then return false end
      local n = obj.Name:lower()
      for _, k in ipairs(blocked) do
         if n:find(k) then return true end
      end
      return false
   end

   -- Nuke existing
   for _, v in ipairs(game:GetDescendants()) do
      if (v:IsA("Script") or v:IsA("LocalScript") or v:IsA("ModuleScript")) and isBad(v) then
         v:Destroy()
      end
      if (v:IsA("RemoteEvent") or v:IsA("RemoteFunction")) and isBad(v) then
         v:Destroy()
      end
   end

   -- Block new
   game.DescendantAdded:Connect(function(obj)
      if not DisableStrictACEnabled then return end
      if (obj:IsA("Script") or obj:IsA("LocalScript") or obj:IsA("ModuleScript")) and isBad(obj) then
         task.spawn(function() pcall(obj.Destroy, obj) end)
      end
      if (obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction")) and isBad(obj) then
         task.spawn(function() pcall(obj.Destroy, obj) end)
      end
   end)

   -- Hook require
   local oldReq = require
   require = newcclosure(function(mod)
      if DisableStrictACEnabled and isBad(mod) then
         return setmetatable({}, {__call = function() end})
      end
      return oldReq(mod)
   end)

   -- Disable common AC functions
   pcall(function()
      for _, v in ipairs(getgc(true)) do
         if typeof(v) == "function" then
            local info = debug.getinfo(v)
            if info.name and (info.name:find("check") or info.name:find("detect")) then
               v = function() end
            end
         end
      end
   end)
end

if DisableStrictACEnabled then RunStrictACDisabler() end

-- === ANTIFLING: NOCLIP THROUGH PLAYERS ONLY ===
RunService.Stepped:Connect(function()
   if not AntiFlingEnabled then return end
   local char = LocalPlayer.Character
   if not char then return end

   for _, plr in ipairs(Players:GetPlayers()) do
      if plr ~= LocalPlayer and plr.Character then
         local root = plr.Character:FindFirstChild("HumanoidRootPart")
         if root then
            for _, part in ipairs(char:GetDescendants()) do
               if part:IsA("BasePart") and part.CanCollide then
                  local dist = (part.Position - root.Position).Magnitude
                  if dist < 5 then
                     part.CanCollide = false
                  end
               end
            end
         end
      end
   end
end)

-- === ANTIHIT: AUTO DODGE NEARBY PLAYERS ===
RunService.Heartbeat:Connect(function()
   if not AntiHitEnabled then return end
   local char = LocalPlayer.Character
   if not char then return end
   local hrp = char:FindFirstChild("HumanoidRootPart")
   if not hrp then return end

   for _, plr in ipairs(Players:GetPlayers()) do
      if plr ~= LocalPlayer and plr.Character then
         local theirHRP = plr.Character:FindFirstChild("HumanoidRootPart")
         if theirHRP then
            local dist = (hrp.Position - theirHRP.Position).Magnitude
            if dist < DodgeDistance and dist > 3 then
               local dir = (hrp.Position - theirHRP.Position).Unit
               hrp.CFrame = hrp.CFrame + dir * (DodgeDistance - dist + 2)
            end
         end
      end
   end
end)

-- === LOAD NOTIFY ===
Rayfield:Notify({
   Title = "Proton v3 Loaded",
   Content = "by fluxu â€” Bypasses ALL anticheats. AntiFling + AntiHit active.",
   Duration = 7,
   Image = 4483362458
})

Rayfield:LoadConfiguration()
